<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Produtos</title>
  <!-- Font Awesome para os √≠cones das fotos -->
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
  <!-- Seu CSS principal -->
  <link rel="stylesheet" href="menu_produto.css"/>
</head>
<body>

  <div class="dark-light">
    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none"
         stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
    </svg>
  </div>

  <div class="app">
    <!-- Cabe√ßalho principal -->
<!-- ===== CABE√áALHO PRINCIPAL ===== -->
<div class="header" id="appHeader">
  <img class="menu-logo" src="../img/logo.png" alt="Logo da empresa" />

  <!-- Links que podem ‚Äúsobrar‚Äù -->
<nav id="mainMenu" class="header-menu">

  <a id="menu-inicio"
     class="menu-link is-active"
     data-target="paginaInicio"
     data-nav-key="top:inicio"
     data-nav-pos="top"
     data-nav-label="In√≠cio"
     data-nav-selector="#menu-inicio">In√≠cio</a>

  <a id="menu-produto"
     class="menu-link" href="#"
     data-nav-key="top:produto"
     data-nav-pos="top"
     data-nav-label="Produto"
     data-nav-selector="#menu-produto">Produto</a>

  <a id="menu-qualidade"
     class="menu-link" href="#"
     data-nav-key="top:qualidade"
     data-nav-pos="top"
     data-nav-label="Qualidade"
     data-nav-selector="#menu-qualidade">Qualidade</a>

  <a id="menu-acessos"
     class="menu-link" href="#"
     data-nav-key="top:acessos"
     data-nav-pos="top"
     data-nav-label="Acessos"
     data-nav-selector="#menu-acessos">Acessos</a>

  <a id="menu-notificacoes"
     class="menu-link" href="#"
     data-nav-key="top:notificacoes"
     data-nav-pos="top"
     data-nav-label="Notifica√ß√µes"
     data-nav-selector="#menu-notificacoes">Notifica√ß√µes</a>
</nav>

  <!-- Campo de busca -->
<div class="user-badge">
  <span id="userNameDisplay" class="user-name">Usu√°rio</span>
</div>


  <!-- √çcones da direita -->
  <div class="header-profile">
    <div class="notification">
      <span class="notification-number">5</span>
      <i class="fa-solid fa-bell"></i>
    </div>
    <i class="fa-solid fa-print"></i>
    <i class="fa-solid fa-cloud"></i>
    <img id="profile-icon" class="profile-img"
         src="https://images.unsplash.com/photo-1600353068440-6361ef3a86e8?auto=format&fit=crop&w=1000&q=80"
         alt="Perfil">
  </div>

  <!-- Dropdown criado dinamicamente -->
  <div id="moreMenu" class="more-menu"></div>
</div>



    <div class="wrapper">
      <!-- Menu lateral -->
      <div class="left-side">
<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:produtos"
       data-nav-pos="side"
       data-nav-label="Produtos">Produtos</div>

  <div class="side-menu">
    <a href="#"
       id="btn-omie-list1"
       data-nav-key="side:produtos:lista"
       data-nav-parent="side:produtos"
       data-nav-pos="side"
       data-nav-label="Lista de produtos"
       data-nav-selector="#btn-omie-list1">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;flex-shrink:0;">
        <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/>
      </svg>
      Lista de produtos
    </a>

    <a href="#"
       id="btn-omie-list"
       data-nav-key="side:produtos:constr2"
       data-nav-parent="side:produtos"
       data-nav-pos="side"
       data-nav-label="em constru√ß√£o 2"
       data-nav-selector="#btn-omie-list">
      <svg viewBox="0 0 512 512"></svg>
      em constru√ß√£o 2
    </a>

    <a href="#"
       data-nav-key="side:produtos:constr3"
       data-nav-parent="side:produtos"
       data-nav-pos="side"
       data-nav-label="em constru√ß√£o 3">
      <svg viewBox="0 0 488.932 488.932" fill="currentColor"></svg>
      em constru√ß√£o 3
    </a>
  </div>
</div>

<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:rh"
       data-nav-pos="side"
       data-nav-label="Recursos humanos">Recursos humanos</div>

  <div class="side-menu">

    <a href="#"
       id="btn-colaboradores"
       class="side-menu-item"
       data-colab="colab"
       data-nav="colaboradores"
       data-nav-key="side:rh:cad-colab"
       data-nav-parent="side:rh"
       data-nav-pos="side"
       data-nav-label="Cadastro de colaboradores"
       data-nav-selector="#btn-colaboradores">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px; flex-shrink:0;">
        <path d="M12 12a5 5 0 100-10 5 5 0 000 10zm0 2c-4.42 0-8 1.79-8 4v2h16v-2c0-2.21-3.58-4-8-4z"/>
      </svg>
      Cadastro de colaboradores
    </a>

    <a href="#" class="menu-link"
       data-nav-key="side:rh:aniversariantes"
       data-nav-parent="side:rh"
       data-nav-pos="side"
       data-nav-label="Aniversariantes">Aniversariantes</a>

    <a href="#"
       data-nav-key="side:rh:constr18"
       data-nav-parent="side:rh"
       data-nav-pos="side"
       data-nav-label="‚Ä¶ em constru√ß√£o 18 ‚Ä¶">‚Ä¶ em constru√ß√£o 18 ‚Ä¶</a>
  </div>
</div>




<!-- Nova categoria: Log√≠stica -->
<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:log"
       data-nav-pos="side"
       data-nav-label="Log√≠stica">Log√≠stica</div>

  <div class="side-menu">
    <a href="#"
       id="menu-pedidos"
       class="menu-link"
       data-nav-key="side:log:pedidos"
       data-nav-parent="side:log"
       data-nav-pos="side"
       data-nav-label="Pedidos"
       data-nav-selector="#menu-pedidos">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/>
      </svg>
      Pedidos
    </a>

    <a href="#"
       id="menu-armazens"
       class="menu-link"
       data-nav-key="side:log:armazens"
       data-nav-parent="side:log"
       data-nav-pos="side"
       data-nav-label="Armaz√©ns"
       data-nav-selector="#menu-armazens">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 9.5V21h3v-7h12v7h3V9.5L12 3 3 9.5zM9 19H6v-5h3v5zm9 0h-3v-5h3v5z"/>
      </svg>
      Armaz√©ns
    </a>
  </div>
</div>

<!-- Nova categoria: Qualidade -->
<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:qualidade"
       data-nav-pos="side"
       data-nav-label="Qualidade">Qualidade</div>

  <div class="side-menu">
    <a href="#"
       id="menu-qualidade-abertura-os"
       class="menu-link"
       data-nav-key="side:qualidade:abertura-os"
       data-nav-parent="side:qualidade"
       data-nav-pos="side"
       data-nav-label="Abertura de OS"
       data-nav-selector="#menu-qualidade-abertura-os">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14l4-4h12c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
      </svg>
      Abertura de OS
    </a>

    <a href="#"
       id="menu-qualidade-consultar-os"
       class="menu-link"
       data-nav-key="side:qualidade:consultar-os"
       data-nav-parent="side:qualidade"
       data-nav-pos="side"
       data-nav-label="Consulta"
       data-nav-selector="#menu-qualidade-consultar-os">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 4h18v2H3V4zm0 6h18v2H3v-2zm0 6h11v2H3v-2z"/>
      </svg>
      Consulta
    </a>

    <a href="#"
       id="menu-qualidade-consultar-equipamento"
       class="menu-link"
       data-nav-key="side:qualidade:consultar-equipamento"
       data-nav-parent="side:qualidade"
       data-nav-pos="side"
       data-nav-label="Consultar equipamento"
       data-nav-selector="#menu-qualidade-consultar-equipamento">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M12 2a7 7 0 017 7c0 3.31-2.21 6.11-5.2 6.86L16 22H8l2.2-6.14C7.21 15.11 5 12.31 5 9a7 7 0 017-7z"/>
      </svg>
      Consultar equipamento
    </a>
  </div>
</div>

<!-- Nova categoria: IAPP -->
<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:iapp"
       data-nav-pos="side"
       data-nav-label="IAPP">IAPP</div>

  <div class="side-menu">
    <a href="#"
       id="menu-iapp-sincronizar-op-iapp"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-op-iapp"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar OP IAPP"
       data-nav-selector="#menu-iapp-sincronizar-op-iapp">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/>
      </svg>
      Sincronizar OP IAPP
    </a>

    <a href="#"
       id="menu-iapp-sincronizar-lista-pecas"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-lista-pecas"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar Lista de pe√ßas"
       data-nav-selector="#menu-iapp-sincronizar-lista-pecas">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M5 4h14v2H5V4zm0 7h14v2H5v-2zm0 7h14v2H5v-2z"/>
      </svg>
      Sincronizar Lista de pe√ßas
    </a>

    <a href="#"
       id="menu-iapp-sincronizar-op-glide"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-op-glide"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar OP GLIDE"
       data-nav-selector="#menu-iapp-sincronizar-op-glide">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M4 4h16v2H4V4zm0 6h16v2H4v-2zm0 6h16v2H4v-2z"/>
      </svg>
      Sincronizar OP GLIDE
    </a>

    <a href="#"
       id="menu-iapp-sincronizar-at"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-at"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar AT"
       data-nav-selector="#menu-iapp-sincronizar-at">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 3h18v2H3V3zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/>
      </svg>
      Sincronizar AT
    </a>

    <a href="#"
       id="menu-iapp-sincronizar-originalis"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-originalis"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar Originalis"
       data-nav-selector="#menu-iapp-sincronizar-originalis">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 3h18v2H3V3zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/>
      </svg>
      Sincronizar Originalis
    </a>

    <a href="#"
       id="menu-iapp-sincronizar-pre2024"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-pre2024"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar &lt; 2024"
       data-nav-selector="#menu-iapp-sincronizar-pre2024">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M3 5h18v2H3V5zm0 6h18v2H3v-2zm0 6h18v2H3v-2z"/>
      </svg>
      Sincronizar &lt; 2024
    </a>

    <!-- Bot√£o direto para sincronizar Produtos da Omie (atalho) -->
    <a href="#"
       id="menu-iapp-sincronizar-produtos-omie"
       class="menu-link"
       data-nav-key="side:iapp:sincronizar-produtos-omie"
       data-nav-parent="side:iapp"
       data-nav-pos="side"
       data-nav-label="Sincronizar Produtos (Omie)"
       data-nav-selector="#menu-iapp-sincronizar-produtos-omie">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M12 4a8 8 0 018 8h2l-3 3-3-3h2a6 6 0 10-6 6v2a8 8 0 110-16z"/>
      </svg>
      Sincronizar Produtos (Omie)
    </a>
  </div>
</div>

<!-- Nova categoria: Omie -->
<div class="side-wrapper">
  <div class="side-title"
       data-nav-key="side:omie"
       data-nav-pos="side"
       data-nav-label="Omie">Omie</div>

  <div class="side-menu">
    <a href="#"
       id="menu-omie-atualizar"
       class="menu-link"
       data-nav-key="side:omie:atualizar"
       data-nav-parent="side:omie"
       data-nav-pos="side"
       data-nav-label="Atualizar tabelas"
       data-nav-selector="#menu-omie-atualizar">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="margin-right:8px;">
        <path d="M12 4a8 8 0 018 8h2l-3 3-3-3h2a6 6 0 10-6 6v2a8 8 0 110-16z"/>
      </svg>
      Atualizar tabelas
    </a>
  </div>
</div>



      </div>

      <!-- Conte√∫do principal -->

      <!-- Painel In√≠cio ‚Äî aparece primeiro -->
<div id="paginaInicio" class="tab-pane" style="display:block;">
  <div class="content-wrapper">
    <div class="content-section">

<div class="inicio-grid auth-group" id="grupo-acesso-restrito" data-auth-guard>
  <button class="inicio-btn requires-auth"
          id="btn-linha-producao"
          data-nav-key="inicio:linha-producao"
          data-nav-pos="top"
          data-nav-label="Linha de produ√ß√£o"
          data-nav-selector="#btn-linha-producao">Linha de produ√ß√£o</button>

  <button id="btn-prep-eletrica"
          class="inicio-btn requires-auth"
          data-nav-key="inicio:prep-eletrica"
          data-nav-pos="top"
          data-nav-label="Prepara√ß√£o el√©trica"
          data-nav-selector="#btn-prep-eletrica">Prepara√ß√£o el√©trica</button>

  <button class="inicio-btn requires-auth"
          id="btn-prep-base"
          data-nav-key="inicio:prep-base"
          data-nav-pos="top"
          data-nav-label="Prepara√ß√£o da base"
          data-nav-selector="#btn-prep-base">Prepara√ß√£o da base</button>
</div>




</div>
  </div>
</div>

<!-- Painel para Abertura de OS (criar/abrir nova OS) -->
<div id="qualidadeAberturaOsNova" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <h2>Abertura de OS</h2>
      <p class="content-note">Formul√°rio para abertura de nova Ordem de Servi√ßo.</p>
      <div class="qualidade-os-form">
        <div class="form-group">
          <label for="abertura-os-cliente">Cliente:</label>
          <input type="text" id="abertura-os-cliente" placeholder="Nome do cliente" />
        </div>
        <div class="form-group">
          <label for="abertura-os-produto">Produto:</label>
          <input type="text" id="abertura-os-produto" placeholder="C√≥digo ou descri√ß√£o do produto" />
        </div>
        <div class="form-group">
          <label for="abertura-os-descricao">Descri√ß√£o do problema:</label>
          <textarea id="abertura-os-descricao" placeholder="Descreva o problema ou servi√ßo solicitado" rows="4"></textarea>
        </div>
        <div class="form-group">
          <label for="abertura-os-prioridade">Prioridade:</label>
          <select id="abertura-os-prioridade">
            <option value="baixa">Baixa</option>
            <option value="media" selected>M√©dia</option>
            <option value="alta">Alta</option>
            <option value="urgente">Urgente</option>
          </select>
        </div>
        <div class="form-actions">
          <button id="abertura-os-limpar" class="btn-secondary">Limpar</button>
          <button id="abertura-os-salvar" class="btn-primary">Abrir OS</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Painel para Consultar equipamento (IAPP) -->
<div id="qualidadeConsultarEquipamento" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <h2>Consultar equipamento (IAPP)</h2>
      <p class="content-note">Digite o ID num√©rico da OP na IAPP. Para descobrir o ID, v√° na p√°gina da OP no sistema IAPP e copie o n√∫mero que aparece na URL ap√≥s "id=" (ex.: .../editar?id=1593715).</p>
      <div class="qualidade-os-search" style="max-width:600px;">
        <input type="number" id="iapp-consulta-input" placeholder="ID num√©rico (ex.: 1593715)" autocomplete="off" />
        <button id="iapp-consulta-btn">Buscar</button>
        <button id="iapp-listar-btn" style="margin-left:10px;">Listar Todos</button>
      </div>
      <div id="iapp-consulta-feedback" class="content-note"></div>
      <div id="iapp-consulta-resultado" style="margin-top:20px;">
        <pre id="iapp-consulta-output" style="background:#f5f5f5;color:#000;padding:16px;border-radius:6px;overflow:auto;max-height:600px;font-size:13px;line-height:1.5;"></pre>
      </div>
    </div>
  </div>
</div>

<!-- Painel para Consulta de OS -->
<div id="qualidadeConsultaOs" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <h2>Consulta Abertura de OS</h2>
      <p class="content-note">Informe o c√≥digo de OS, OP, NS, NF, nome do cliente ou CNPJ/CPF para localizar registros relacionados.</p>
      <div class="qualidade-os-search">
        <input type="text" id="qualidade-os-input" placeholder="Ex.: 625, 8A00240411003121, 14496-A, 10979, Nome Cliente, CNPJ/CPF" autocomplete="off" />
        <button id="qualidade-os-search-btn">Buscar</button>
      </div>
      
      <!-- Filtro de tabelas (compacto e recolh√≠vel) -->
      <div class="qualidade-filter-panel">
        <div class="qualidade-filter-header">
          <div class="qualidade-filter-title">
            <strong>Filtrar por tabelas</strong>
            <span id="qualidade-filter-count" class="muted"></span>
          </div>
          <div class="qualidade-filter-actions">
            <button id="qualidade-filter-toggle" class="btn-link" aria-expanded="false">Mostrar filtros</button>
            <span class="sep">¬∑</span>
            <button id="qualidade-select-all" class="btn-link">Marcar todas</button>
            <span class="sep">/</span>
            <button id="qualidade-deselect-all" class="btn-link">Desmarcar</button>
          </div>
        </div>
        <div id="qualidade-sources-container" class="qualidade-sources-container is-collapsed" aria-hidden="true">
          <div id="qualidade-sources-checkboxes" class="qualidade-source-list">
            <label><input type="checkbox" value="controle_assistencia_tecnica" checked /><span>Hist√≥rico de OS's</span></label>
            <label><input type="checkbox" value="historico_op_glide" checked /><span>Hist√≥rico OP e NS (GLIDE)</span></label>
            <label><input type="checkbox" value="historico_op_glide_f_escopo" checked /><span>Hist√≥rico OP e NS (F Escopo)</span></label>
            <label><input type="checkbox" value="historico_op_iapp" checked /><span>Hist√≥rico OP (IAPP)</span></label>
            <label><input type="checkbox" value="historico_pedido_originalis" checked /><span>Hist√≥rico NF/OP/Pedidos</span></label>
            <label><input type="checkbox" value="pedidos_por_cliente" checked /><span>Pedidos por Cliente</span></label>
            <label><input type="checkbox" value="historico_pre2024" checked /><span>Hist√≥rico pr√©-2024</span></label>
          </div>
        </div>
      </div>
      
      <div id="qualidade-os-feedback" class="content-note"></div>
      <div id="qualidade-os-results" class="qualidade-os-results"></div>
    </div>
  </div>
</div>

<div id="qualidadeAberturaOsDetalhe" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="qualidade-detail-toolbar">
        <button id="qualidade-os-back" class="qualidade-detail-back">‚Üê Voltar</button>
        <button id="qualidade-os-save" class="qualidade-detail-save" disabled>Salvar altera√ß√µes</button>
      </div>
      <div class="qualidade-detail-header">
        <h2 id="qualidade-os-detail-title">Detalhes</h2>
        <span id="qualidade-os-detail-subtitle" class="qualidade-detail-subtitle"></span>
      </div>
      <div id="qualidade-os-detail-meta" class="qualidade-detail-meta"></div>
      <div id="qualidade-os-detail-list" class="qualidade-detail-list"></div>
    </div>
  </div>
</div>

<div id="omieAtualizarTabelas" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <h2>Atualizar tabelas Omie</h2>
      <p class="content-note">
        Selecione uma tabela para solicitar uma sincroniza√ß√£o diretamente com a Omie. As rotinas podem levar alguns minutos.
      </p>
      <div id="omie-sync-list" class="omie-sync-grid"></div>
      <div id="omie-sync-empty" class="content-note" style="display:none;">
        Nenhuma rotina de atualiza√ß√£o dispon√≠vel.
      </div>
    </div>
  </div>
</div>

      <div class="main-container">

        <!-- Painel de Lista de Produtos -->
        <div id="listaProdutos" class="tab-pane" style="display:none;">
          <div class="content-wrapper">
            <div class="content-section">
              <div class="title-wrapper">
                <div class="content-section-title">
                  Lista de produtos (<span id="productCount">0</span>)
                </div>
                <div id="productSpinner" data-pct="0" style="display:none;">
                  <svg id="svg" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
                    <circle r="90" cx="100" cy="100" fill="transparent"
                            stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
                    <circle id="bar" r="90" cx="100" cy="100" fill="transparent"
                            stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
                  </svg>
                </div>
              </div>
              <div class="filter-bar">
                <input type="text" id="codeFilter"  placeholder="Pesquisar c√≥digo"/>
                <input type="text" id="descFilter"  placeholder="Pesquisar descri√ß√£o"/>
                <button id="filterBtn" class="filter-icon">
                  <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="1.5" fill="none"
                       stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 4h18l-7 8v6l-4 2v-8l-7-8z"/>
                  </svg>
                </button>
              </div>
              <div id="filterPanel" class="filter-panel">
                <div class="filter-row">
                  <label for="familySelect">Fam√≠lia:</label>
                  <select id="familySelect"><option value="">‚Äì selecione ‚Äì</option></select>
                  <label for="tipoItemSelect">Tipo de Item:</label>
                  <select id="tipoItemSelect"><option value="">‚Äì selecione ‚Äì</option></select>
                </div>
                <div class="filter-row">
                  <label for="caracteristicaSelect">Caracter√≠stica:</label>
                  <select id="caracteristicaSelect"><option value="">‚Äì selecione ‚Äì</option></select>
                  <label for="conteudoSelect" id="conteudoLabel" style="display:none">Conte√∫do:</label>
                  <select id="conteudoSelect" style="display:none"><option value="">‚Äì selecione ‚Äì</option></select>
                </div>
              </div>
              <ul id="listaProdutosList" class="content-list product-details"></ul>
              <div id="pagination" class="pagination-wrapper"></div>
            </div>
          </div>
        </div>

<div id="produtoTabs">

        <!-- Abas internas principais -->
<div class="main-header">
  <div class="header-menu">
    <a class="main-header-link is-active"
       href="#"
       data-target="dadosProduto"
       data-nav-key="produto:dados"
       data-nav-parent="top:produto"
       data-nav-pos="top"
       data-nav-label="Dados do produto"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-target="dadosProduto"]'>
       Dados do produto
    </a>

    <a class="main-header-link"
       href="#"
       data-target="estruturaProduto"
       data-nav-key="produto:estrutura"
       data-nav-parent="top:produto"
       data-nav-pos="top"
       data-nav-label="Estrutura do produto"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-target="estruturaProduto"]'>
       Estrutura de produto
    </a>

    <a class="main-header-link"
       href="#"
       data-target="listaPecasTab"
       data-nav-key="produto:estrutura:lista-pecas"
       data-nav-parent="produto:estrutura"
       data-nav-pos="top"
       data-nav-label="Lista de pe√ßas"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-target="listaPecasTab"]'>
       Lista de pe√ßas
    </a>

    <a class="main-header-link"
       href="#"
       data-target="listaCaracteristica"
       data-nav-key="produto:estrutura:caracteristica"
       data-nav-parent="produto:estrutura"
       data-nav-pos="top"
       data-nav-label="Caracter√≠sticas"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-target="listaCaracteristica"]'>
       Caracter√≠sticas
    </a>

    <a class="main-header-link"
       href="#"
       data-target="listaFotos"
       data-nav-key="produto:estrutura:fotos"
       data-nav-parent="produto:estrutura"
       data-nav-pos="top"
       data-nav-label="Fotos"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-target="listaFotos"]'>
       Fotos
    </a>
  </div>
</div>



        <div class="tab-content">

          <!-- Dados do produto -->
          <div id="dadosProduto" class="tab-pane" style="display:none;">
            <!-- 1) Cabe√ßalho com t√≠tulo, descri√ß√£o e imagem -->
            <div class="content-wrapper">
              <div class="content-wrapper-header">
                <div class="content-wrapper-context">
                  <h3 class="img-content">
                    <svg viewBox="0 0 512 512"><!-- √≠cone --></svg>
                    <span id="productTitle">C√≥digo do produto</span>
                  </h3>
                  <div class="content-text" id="productDesc"></div>
                  <button class="content-button">Pedido de compra</button>
                </div>
                <img class="content-wrapper-img"
                     id="productImg"
                     src="../img/logo.png"
                     alt="Produto">
              </div>
            </div>

<!-- 2) Novo conjunto de abas dentro de Dados do produto -->
<div class="main-header sub-tabs" style="margin-top: 20px;">
  <div class="header-menu">

    <a class="main-header-link is-active" href="#" data-subtarget="detalhesTab"
       data-nav-key="produto:dados:detalhes"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="Detalhes do produto"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="detalhesTab"]'>
       Detalhes do produto
    </a>

    <a class="main-header-link" href="#" data-subtarget="cadastroTab"
       data-nav-key="produto:dados:cadastro"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="Dados de cadastro"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="cadastroTab"]'>
       Dados de cadastro
    </a>

    <a class="main-header-link" href="#" data-subtarget="financeiroTab"
       data-nav-key="produto:dados:financeiro"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="Financeiro"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="financeiroTab"]'>
       Financeiro
    </a>

    <a class="main-header-link" href="#" data-subtarget="logisticaTab"
       data-nav-key="produto:dados:logistica"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="Log√≠stica"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="logisticaTab"]'>
       Log√≠stica
    </a>

    <a href="#" class="main-header-link" data-subtarget="pdv"
       data-nav-key="produto:dados:pdv"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="PDV"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="pdv"]'>
       PDV
    </a>

    <a href="#" class="main-header-link" data-subtarget="compras"
       data-nav-key="produto:dados:compras"
       data-nav-parent="produto:dados"
       data-nav-pos="top"
       data-nav-label="Compras"
       data-nav-selector='#produtoTabs .main-header .main-header-link[data-subtarget="compras"]'>
       Compras
    </a>

  </div>
</div>


<!-- 3) Blocos de conte√∫do secund√°rio (um para cada aba) -->
<div class="sub-content" id="detalhesTab">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Detalhes do produto</div>
      <ul id="detalhesList" class="content-list product-details">
        <!-- Ser√° preenchido via JS -->
      </ul>
    </div>
  </div>
</div>

<div class="sub-content" id="cadastroTab" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Dados de cadastro</div>
      <ul id="cadastroList" class="content-list product-details">
        <!-- Ser√° preenchido via JS -->
      </ul>
    </div>
  </div>
</div>

<div class="sub-content" id="financeiroTab" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Financeiro</div>
      <ul id="financeiroList" class="content-list product-details">
        <!-- Ser√° preenchido via JS -->
      </ul>
    </div>
  </div>
</div>



<div class="sub-content" id="logisticaTab" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Log√≠stica</div>
      <ul id="logisticaList" class="content-list product-details">
        <!-- Ser√° preenchido via JS -->
      </ul>
    </div>
  </div>
</div>

<!-- Aba PDV -->
<div id="pdv" class="sub-content" style="display:none">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">PDV</div>
      <ul id="pdvList" class="content-list product-details">
        <!-- Preenchido por JS -->
      </ul>
    </div>
  </div>
</div>

<!-- Aba Compras -->
<div id="compras" class="sub-content" style="display:none">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Compras</div>
      <ul id="comprasList" class="content-list product-details">
        <!-- Preenchido por JS -->
      </ul>
    </div>
  </div>
</div>


          </div>

          <!-- Estrutura do produto -->
          <div id="estruturaProduto" class="tab-pane" style="display:none;">
            <div class="content-wrapper">
              <div class="content-section">


                <div class="title-wrapper">
                  <div class="content-section-title">
  Estrutura de produto (<span id="estruturaCount">0</span>)
</div>




  <button
    id="btnImportarEstrutura"
    class="icon-inline-btn"
    type="button"
    aria-label="Importar estrutura de produto"
    title="Importar estrutura de produto">
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M12 3v10m0 0l-4-4m4 4l4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M4 21h16a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5l-2 2-2-2H5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <!-- Vers√£o & Atualizado por (UI) -->
  <span id="estruturaVersaoWrap" style="margin-left:12px; display:inline-flex; gap:8px; align-items:center;">
    <span style="font-weight:600;">Vers√£o:</span>
    <span id="estruturaVersaoValue" class="chip"
          style="padding:2px 8px;border-radius:12px;border:1px solid var(--border,#ccc);">
      ‚Äî
    </span>

    <span style="margin-left:16px; font-weight:600;">Atualizado por:</span>
    <span id="estruturaModValue" class="chip"
          style="padding:2px 8px;border-radius:12px;border:1px solid var(--border,#ccc);">
      ‚Äî
    </span>
  </span>

  <button
  id="btnExportarEstrutura"
  class="icon-inline-btn"
  type="button"
  aria-label="Exportar estrutura de produto"
  title="Exportar estrutura de produto">
  <!-- √çcone: seta SAINDO da bandeja (exportar) -->
  <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
    <path d="M12 13V3m0 10l-4 4m4-4l4 4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M4 21h16a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5l-2 2-2-2H5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>

<!-- Spinner espec√≠fico da guia Estrutura -->
<div id="estruturaSpinner" data-pct="0" style="display:none;"></div>


                  <!-- Spinner + texto -->
                  <div id="estoqueSpinnerBox" class="spinner-box" style="display:none;">
                    <div id="estoqueSpinner" data-pct="0">
                      <svg id="svgEst" viewBox="0 0 200 200">
                        <circle r="90" cx="100" cy="100" fill="transparent"
                                stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
                        <circle id="barEst" r="90" cx="100" cy="100" fill="transparent"
                                stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
                      </svg>
                    </div>
                    <span class="spinner-label">Carregando custo real‚Ä¶</span>
                  </div>
                </div>
                <ul id="malha" class="content-list">
                  <li class="header-row">
                    <div>C√≥digo</div>
                    <div>Descri√ß√£o</div>
                    <div>QTD</div>
                    <div>Unidade</div>
                    <div>Custo real</div>
                    <div>Editar</div>
                  </li>
                </ul>
              </div>
            </div>
          </div>

<!-- Lista de pe√ßas (aba) -->
<div id="listaPecasTab" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">

      <!-- wrapper necess√°rio p/ bot√£o de filtro -->
      <div class="title-wrapper">
        <div class="content-section-title">Lista de pe√ßas</div>
      </div>

      <!-- ul que o JS espera -->
      <ul id="listaPecasList" class="content-list">
        <!-- cabe√ßalho fixo: o script rep√µe/atualiza -->
        <li class="header-row">
          <div>C√≥digo</div>
          <div>Descri√ß√£o</div>
          <div>QTD</div>
          <div>Unidade</div>
          <div>Valor&nbsp;sugerido</div>
          <div>Abrir</div>
        </li>
      </ul>

    </div>
  </div>
</div>

          
<!-- Caracter√≠sticas -->
<div id="listaCaracteristica" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="content-section-title">Caracter√≠sticas</div>

      <!-- bot√£o provisorio-->
        <button class="content-button" data-action="incluir-conteudo" style="margin-left: 10px;">
    üõ†Ô∏è Incluir conte√∫do
        </button>
       <!-- bot√£o provisorio-->

       
      <ul id="listacaracteristica" class="content-list product-details"></ul>
    </div>
  </div>
</div>


          <!-- Aba Fotos -->
          <div id="listaFotos" class="tab-pane" style="display:none;">
            <div class="content-wrapper">
              <h3 class="content-section-title">Fotos</h3>
              <div class="options"></div>

            </div>
          </div>
            
          <div id="acessos" class="tab-pane" style="display:none;">
            <div class="content-wrapper">
              <div class="content-section">
          
                <!-- 1) T√≠tulo -->
                <div class="title-wrapper">
                  <div class="content-section-title">Gerenciar Acessos</div>
                </div>
          
                <!-- 2) Lista de usu√°rios -->
                <div id="userList" class="content-list"></div>
          
                <!-- 3) Bot√£o Novo Usu√°rio -->
                <button id="btnNewUser" class="content-button">Novo Usu√°rio</button>
          
                <!-- 4) Formul√°rio oculto -->
                <div id="userForm" style="display:none; margin-top:1rem;">
                  <input id="inpUsername" placeholder="Usu√°rio"/>
                  <button id="btnSaveUser" class="content-button">Criar Usu√°rio</button>
                </div>
          
                <hr style="margin:2rem 0; border-color: var(--border-color)" />

                <div class="menu-scroll">
                  <!-- Categoria 1: Menu Lateral -->
                  <div class="title-wrapper">
                    <div class="content-section-title">Menu Lateral</div>
                  </div>
                  <ul id="sideMenuList" class="content-list">
                    <!-- ‚Ä¶itens‚Ä¶ -->
                  </ul>
                
                  <!-- Divisor interno entre categorias -->
                  <hr style="margin:1.5rem 0; border-color: var(--border-color)" />
                
                  <!-- Categoria 2: Menu Superior -->
                  <div class="title-wrapper">
                    <div class="content-section-title">Menu Superior</div>
                  </div>
                  <ul id="topMenuList" class="content-list">
                    <!-- ‚Ä¶itens‚Ä¶ -->
                  </ul>
                </div> <!-- /.menu-scroll -->
                
          
              </div> <!-- /.content-section -->
            </div> <!-- /.content-wrapper -->
          </div> <!-- /#acessos -->
          
<!-- Painel de notifica√ß√µes ------------------------------------------------>
<div id="notificacoes" class="tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="title-wrapper">
        <div class="content-section-title">Notifica√ß√µes</div>
      </div>

      <ul id="listaNotificacoes" class="content-list"></ul>
    </div>
  </div>
</div>

          
            



        </div> <!-- /.tab-content -->

</div> <!-- /#produtoTabs -->

<!-- Abas de Pedidos (inicialmente ocultas) -->
<div id="kanbanTabs" class="main-header" style="display:none; margin-top:1rem;">
  <div class="header-menu">
    <a href="#" data-kanban-tab="comercial" class="main-header-link is-active">Comercial</a>
    <a href="#" data-kanban-tab="pcp"       class="main-header-link">PCP</a>
<a href="#" data-kanban-tab="preparacao" class="main-header-link">
  Prepara√ß√£o
</a>

    <a href="#" data-kanban-tab="producao"  class="main-header-link">Produ√ß√£o</a>
    <a href="#" data-kanban-tab="detalhes"  class="main-header-link">Detalhes</a>
  </div>
</div>

<!-- Abas de Armaz√©ns (inicialmente ocultas) -->
<div id="armazemTabs" class="main-header" style="display:none; margin-top:1rem;">
  <div class="header-menu">
    <a href="#" data-arm-tab="almoxarifado" class="main-header-link is-active">Almoxarifado</a>
    <a href="#" data-arm-tab="producao"      class="main-header-link">Produ√ß√£o</a>
    <a href="#" data-arm-tab="expedicao"     class="main-header-link">Expedi√ß√£o</a>
    <a href="#" data-arm-tab="produto"       class="main-header-link">Produto acabado</a>
    <a href="#" data-arm-tab="terceiros"     class="main-header-link">Terceiros</a>
    <a href="#" data-arm-tab="Geral"     class="main-header-link">geral</a>
    <a href="#" data-arm-tab="transferencia" class="main-header-link">Transfer√™ncia</a>
  </div>
</div>

<div id="armazemContent" style="display:none;">
<!-- Painel de Almoxarifado (Armaz√©ns) -->
<div id="conteudo-almoxarifado" class="armazem-page tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="title-wrapper">
        <div class="content-section-title">
          Almoxarifado (<span id="almoxCount">0</span>)
        </div>

        <input id="almoxSearch"
       type="text"
       placeholder="Pesquisar por c√≥digo ou descri√ß√£o‚Ä¶"
       class="search-box" />

       <span id="almoxCmcTotal" class="cmc-total">Total CMC: R$ 0,00</span>
      
<button id="almoxFilterBtn" class="filter-icon" title="Filtrar por tipo">
  <i class="fa-solid fa-filter"></i>
</button>

<!-- Painel que aparece/ some -->
<div id="almoxFilterPanel" class="filter-panel" style="display:none;"></div>


        <!-- spinner opcional (mesmo padr√£o que voc√™ usa em Pedidos) -->
        <div id="almoxSpinner" data-pct="0" style="display:none;">
          <!-- copie seu SVG de spinner aqui se quiser -->
        </div>
      </div>

      <!-- aqui a tabela √© montada em runtime -->
<!-- ‚Äî‚Äî wrapper fixo + scroll ‚Äî‚Äî -->
<div class="almox-wrapper">
  <table id="tbl-almoxarifado" class="tabela padrao">
    <thead>
      <tr>
        <th class="sel-col"></th>
                <th>C√≥digo</th>
                <th>Descri√ß√£o</th>
                <th>Qtd</th>
                <th>F√≠sico</th>
                <th>Saldo</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- ‚Äî‚Äî pagina√ß√£o ‚Äî‚Äî -->
<div class="almox-pager">
  <button id="almoxPrev"  class="btn tiny">‚óÄ</button>
  <span   id="almoxPageInfo">1 / 1</span>
  <button id="almoxNext"  class="btn tiny">‚ñ∂</button>
</div>


    </div>
  </div>
</div>

<!-- Painel de Produ√ß√£o -->
<div id="conteudo-producao" class="armazem-page tab-pane" style="display:none;">
  <div class="content-wrapper">
    <div class="content-section">
      <div class="title-wrapper">
        <div class="content-section-title">
          Produ√ß√£o (<span id="prodCount">0</span>)
        </div>

        <input id="prodSearch"
               type="text"
               placeholder="Pesquisar na descri√ß√£o‚Ä¶"
               class="search-box" />

        <span id="prodCmcTotal" class="cmc-total">Total CMC: R$ 0,00</span>
        <button id="prodFilterBtn" class="filter-icon" title="Filtrar por grupo">
  <i class="fa-solid fa-filter"></i>
</button>

<div id="prodFilterPanel" class="filter-panel" style="display:none;"></div>

      </div>

      <div class="producao-wrapper">
        <table id="tbl-producao" class="tabela padrao">
          <thead>
            <tr>
              <th>C√≥digo</th><th>Descri√ß√£o</th><th>Est. m√≠n.</th>
              <th>F√≠sico</th><th>Reservado</th><th>Saldo</th><th>CMC</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="almox-pager"><!-- reaproveita classe -->
        <button id="prodPrev" class="btn tiny">‚óÄ</button>
        <span   id="prodPageInfo">1 / 1</span>
        <button id="prodNext" class="btn tiny">‚ñ∂</button>
      </div>
    </div>
  </div>
</div>

  <div id="conteudo-expedicao"    class="armazem-page" style="display:none;"></div>
  <div id="conteudo-produto"      class="armazem-page" style="display:none;"></div>
  <div id="conteudo-terceiros"    class="armazem-page" style="display:none;"></div>
  <div id="conteudo-geral"    class="armazem-page" style="display:none;"></div>
  <div id="conteudo-transferencia" class="armazem-page" style="display:none;">
    <div class="content-wrapper">
      <div class="content-section">
        <div class="title-wrapper">
          <div class="content-section-title">Transfer√™ncia entre armazens</div>
        </div>
        <div class="transferencia-locais">
          <div class="origem-group">
            <label for="transferOrigem">Origem</label>
            <select id="transferOrigem" class="transfer-select">
              <option value="">Selecione‚Ä¶</option>
            </select>
          </div>
          <div class="destino-group">
            <label for="transferDestino">Destino</label>
            <div class="destino-inline">
              <select id="transferDestino" class="transfer-select">
                <option value="">Selecione‚Ä¶</option>
              </select>
              <input id="transferQtdBulk" type="number" min="0" step="0.01" placeholder="Qtd" class="transfer-qtd-bulk" title="Aplicar quantidade para todos" />
              <button id="transferSelectAllBtn"
                      type="button"
                      class="icon-btn"
                      title="Selecionar todos os itens"
                      aria-label="Selecionar todos">
                <i class="fa-solid fa-square-check"></i>
              </button>
              <button id="transferenciaBtn"
                      type="button"
                      class="icon-btn"
                      title="Transferir itens selecionados"
                      aria-label="Transferir itens"
                      disabled>
                <i class="fa-solid fa-right-left"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="transferencia-controls">
          <div class="transferencia-search">
            <input id="transferSearch" type="text"
                   placeholder="Adicionar item por c√≥digo ou descri√ß√£o‚Ä¶"
                   class="search-box" autocomplete="off" />
            <div class="transfer-search-dropdown">
              <ul id="transferSearchResults" class="transfer-search-results"></ul>
            </div>
          </div>
        </div>
        <div class="transferencia-wrapper">
          <table class="tabela padrao transferencia-table">
            <thead>
              <tr>
                <th class="sel-col"></th>
                <th>C√≥digo</th>
                <th>Descri√ß√£o</th>
                <th>Qtd</th>
                <th>F√≠sico</th>
                <th>Saldo</th>
              </tr>
            </thead>
            <tbody id="transferenciaTbody">
              <tr class="transferencia-placeholder">
                <td colspan="6">Nenhum item selecionado para transfer√™ncia.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>



  <!-- Comercial -->
<div id="kanbanContent" style="display:none;">
  <div id="conteudo-comercial" class="kanban-page">
<div class="kanban-board">
<div class="kanban-column">
  <div class="kanban-header">
    <div class="title-wrapper">
      <span>Pedido aprovado</span>
      <!-- [MOVE] Bot√£o para abrir a busca de produtos (agora nesta coluna) -->
      <i class="fas fa-plus add-btn" title="Adicionar filtro"></i>
      <!-- Spinner escondido por CSS at√© ser exibido pelo JS -->
      <i class="fas fa-spinner fa-spin kanban-spinner"></i>
    </div>

    <!-- [MOVE] Painel de busca que antes ficava em ‚ÄúAguardando prazo‚Äù -->
    <div class="add-container">
      <input type="text" class="add-search" placeholder="Pesquisar‚Ä¶" />
      <!-- >>> Lista de resultados da busca <<< -->
      <ul class="add-results"></ul>
    </div>
  </div>
  <ul id="coluna-comercial" class="kanban-list"></ul>

</div>


<div class="kanban-column">
  <div class="kanban-header">
    <div class="title-wrapper">
      <span>Aguardando prazo</span>
      <button type="button"
              id="btn-listar-excluidos"
              class="kanban-icon-btn"
              title="Listar OPs exclu√≠das"
              aria-label="Listar OPs exclu√≠das">
        <i class="fas fa-ban" aria-hidden="true"></i>
      </button>
      <!-- [LIMPEZA] Removido o add-btn e o add-container desta coluna -->
    </div>
  </div>
  <ul id="coluna-pcp-aprovado" class="kanban-list"></ul>

</div>



  <div class="kanban-column">
    <div class="kanban-header">Fila de produ√ß√£o</div>
    <ul id="coluna-pcp-op" class="kanban-list"></ul>
  </div>
</div>

    <div class="kanban-board">‚Ä¶</div>
  </div>


<div id="conteudo-pcp" class="kanban-page" style="display:none;">
  <div id="listaPecasPCP">
    <div class="content-wrapper">
      <div class="content-section">

<!-- Barra: observa√ß√µes da PCP -->
<div id="pcp-code-bar" class="code-bar" style="display:none; margin:6px 0 12px;">
  <span id="pcp-code" class="prod-code" style="display:none;"></span>
  <input id="pcp-obs" type="text" placeholder="Observa√ß√µes‚Ä¶" style="flex:1; min-width:220px;">
</div>

        <div class="title-wrapper" style="gap:12px; align-items:center;">
          <div class="content-section-title">Lista de pe√ßas</div>
          <span id="pcpListaVersaoWrap"
                style="display:inline-flex; align-items:center; gap:6px; font-size:0.85rem;">
            <span style="font-weight:600;">Vers√£o:</span>
                <span id="pcpListaVersaoValue"
                      class="chip"
                      style="padding:2px 8px; border-radius:12px; border:1px solid var(--border,#ccc);">
              ‚Äî
            </span>
          </span>

          <!-- toolbar da lista (select do produto + filtro + spinner) -->
          <div style="display:flex; gap:8px; align-items:center; margin-left:auto;">
          </div>
        </div>



        <!-- Lista de pe√ßas (cabe√ßalho fixo + linhas din√¢micas) -->
<ul id="listaPecasPCPList" class="grid-pecas">
<!-- Cabe√ßalho da Lista de pe√ßas (PCP) ‚Äî r√≥tulos ajustados para Arm Pro / Arm Alm -->
<li class="header-row">
  <div class="cod">C√≥digo</div>
  <div class="desc">Descri√ß√£o</div>
  <div class="unid">Unid</div>
  <div class="qtd">Qtd</div>
  <div class="qtdprod">Qtd prod</div>
  <div class="qtdpro">Arm Pro</div> <!-- s√≥ mudou o texto -->
  <div class="qtdalm">Arm Alm</div> <!-- s√≥ mudou o texto -->
  <div class="acao">A√ß√£o</div>
</li>





        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================ -->

<!-- === bloco PREPARA√á√ÉO (Kanban) ============================ -->
<div id="conteudo-preparacao" class="kanban-page" style="display:none;">
  <div class="kanban-board">

    <!-- Coluna 1: A Produzir -->
    <div class="kanban-column">
      <div class="kanban-header">
        <div class="title-wrapper">
          <span>A Produzir</span>
          <i class="fas fa-plus add-btn" title="Adicionar filtro"></i>
        </div>
        <div class="add-container">
          <input type="text" class="add-search" placeholder="Pesquisar‚Ä¶" />
          <ul class="add-results"></ul>
        </div>
      </div>
      <ul id="coluna-prep-fila" class="kanban-list"></ul>
    </div>

    <!-- Coluna 2: Produzindo -->
    <div class="kanban-column">
      <div class="kanban-header"><span>Produzindo</span></div>
      <ul id="coluna-prep-em-producao" class="kanban-list"></ul>
    </div>

    <!-- Coluna 3: teste 1
    <div class="kanban-column">
      <div class="kanban-header"><span>teste 1</span></div>
      <ul id="coluna-prep-estoque" class="kanban-list"></ul>
    </div>

    <div class="kanban-column">
      <div class="kanban-header"><span>teste final</span></div>
      <ul id="coluna-prep-teste-final" class="kanban-list"></ul>
    </div> -->

    <!-- Coluna 5: Produzido -->
    <div class="kanban-column">
      <div class="kanban-header"><span>Produzido</span></div>
      <ul id="coluna-prep-concluido" class="kanban-list"></ul>
    </div>

  </div>
</div>
<!-- ========================================================= -->





  <div id="conteudo-producao" class="kanban-page" style="display:none;"></div>
  <div id="conteudo-detalhes" class="kanban-page" style="display:none;">
  <div id="detalhesContainer" class="detalhes-container">
    <!-- Detalhes do pedido ser√£o inseridos aqui -->
  </div>
</div>

</div>








      </div> <!-- /.main-container -->





    </div> <!-- /.wrapper -->

    <div class="overlay-app" id="authOverlay"></div>
  </div> <!-- /.app -->



<!-- Modal de etiquetas ----------------------------->
<div id="etiquetasModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3>Etiquetas dispon√≠veis</h3>
    <ul id="listaEtiquetas" class="etiquetas-list"></ul>
  </div>
</div>



 <!-- PapaParse 5.3.2 com hash corrigido -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"
  integrity="sha512-SGWgwwRA8xZgEoKiex3UubkSkV1zSE1BS6O4pXcaxcNtUlQsOmOmhVnDwIvqGRfEmuz83tIGL13cXMZn6upPyg=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer">
</script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="module" src="login/login.js"></script>
  <script type="module" src="menu_produto.js"></script>
  
  <script type="module" src="./requisicoes_omie/filtro_produto.js"></script>
  <script type="module" src="./requisicoes_omie/ListarProdutos.js"></script>
  <script type="module" src="./requisicoes_omie/Dados_produto.js" defer></script>
  <script type="module" src="./requisicoes_omie/dados_colaboradores.js"></script>
  <script src="produtos/produto_foto.js" defer></script>
  <script type="module" src="produtos/Enviar_estrutura.js" defer></script>
  <script type="module" src="kanban/kanban_preparacao.js"></script>

  <script type="module" src="./kanban/kanban.js" defer></script>

<style>
  .mp-header{
    display:flex; align-items:center; justify-content:space-between;
    margin:12px 0 8px; padding:0 4px; color:#e5e7eb;
  }
  .mp-header .mp-title{ font-size:1.25rem; font-weight:700; }
  .mp-header .mp-title .muted{ opacity:.7; font-weight:600; }
  .mp-header .mp-back{
    padding:8px 14px; border:0; border-radius:10px;
    background:#0ea5e9; color:#fff; cursor:pointer;
    box-shadow:0 6px 14px rgba(14,165,233,.25);
  }
  .mp-header .mp-back:hover{ filter:brightness(1.05); }

    .kanban-list.droptarget { outline: 2px dashed #60a5fa; outline-offset: 2px; }
  .kanban-card.dragging   { opacity: .6; }
</style>



<script>
/* ========= Menu Produto: Kanban Prepara√ß√£o ‚Üí modo OPs + Header + Drag&Drop ========= */
(() => {
  // IDs das 3 colunas deste quadro (iguais ao seu HTML)
  const IDS = {
    fila: 'coluna-prep-fila',
    em:   'coluna-prep-em-producao',
    conc: 'coluna-prep-concluido'
  };

  // --- Localiza√ß√£o do wrapper certo (3 colunas) e onde inserir o header ---
  function getBoardWrapper() {
    // o board que queremos √© o dentro da guia "Prepara√ß√£o"
    const wrapper = document.querySelector('#conteudo-preparacao .kanban-board');
    return wrapper || null;
  }

  function ensureHeader() {
    const wrapper = getBoardWrapper();
    if (!wrapper) return;

    let hdr = document.getElementById('mp-ops-header');
    if (!hdr) {
      hdr = document.createElement('div');
      hdr.id = 'mp-ops-header';
      hdr.className = 'mp-header';
      hdr.style.display = 'none';
      hdr.innerHTML = `
        <div class="mp-title">
          <span class="muted">Produto ‚Äî </span><span id="mp-ops-code"></span>
        </div>
        <button id="mp-ops-exit" class="mp-back">Voltar</button>
      `;
      // Insere o header ANTES do grid de colunas (fica entre as abas e os kanbans)
      wrapper.parentElement.insertBefore(hdr, wrapper);
      document.getElementById('mp-ops-exit').onclick = exitOpsMode;
    } else {
      // se por algum motivo estiver longe, realoca para antes do wrapper
      if (hdr.nextElementSibling !== wrapper) {
        hdr.remove();
        wrapper.parentElement.insertBefore(hdr, wrapper);
      }
    }
  }

  function showHeaderWithCode(codAlfa) {
    ensureHeader();
    const hdr  = document.getElementById('mp-ops-header');
    const code = document.getElementById('mp-ops-code');
    if (hdr && code) {
      code.textContent = codAlfa;
      hdr.style.display = 'flex';
    }
  }

  // --- Drag & Drop helpers ---
  function statusFromUlId(ulId) {
    if (ulId === IDS.fila) return 'A Produzir';
    if (ulId === IDS.em)   return 'Produzindo';
    if (ulId === IDS.conc) return 'Produzido';
    return null;
  }

  async function moveOpAPI(op, novoStatus) {
    const resp = await fetch(`/api/preparacao/op/${encodeURIComponent(op)}/mover`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ status: novoStatus })
    });
    const j = await resp.json().catch(() => ({}));
    if (!resp.ok || j.ok === false) {
      throw new Error(j.error || `Falha ao mover OP para ${novoStatus}`);
    }
    return j;
  }

  function attachOpDrag(li) {
    li.setAttribute('draggable', 'true');
    li.addEventListener('dragstart', (ev) => {
      ev.dataTransfer.setData('application/json', JSON.stringify({ op: li.dataset.op || '' }));
      ev.dataTransfer.effectAllowed = 'move';
      li.classList.add('dragging');
    });
    li.addEventListener('dragend', () => li.classList.remove('dragging'));
  }


  // Encontra o <li> da OP atual no mini-kanban
function findOpLi(op) {
  // OPs s√£o do tipo P101101 ‚Üí seguro usar direto no seletor
  return document.querySelector(`li.kanban-card[data-op="${op}"]`);
}

// Liga/desliga o ‚Äúestado carregando‚Äù no cart√£o da OP
function setOpLoading(op, on) {
  const li = findOpLi(op);
  if (!li) return;

  if (on) {
    if (!li.classList.contains('loading')) {
      li.classList.add('loading'); // j√° tem estilo no seu CSS
      // spinner (mesmo do Comercial)
      const spin = document.createElement('i');
      spin.className = 'fas fa-spinner fa-spin kanban-spinner';
      spin.dataset.role = 'op-spinner';
      // barra de progresso (j√° estilizada no seu CSS)
      const bar = document.createElement('div');
      bar.className = 'loading-bar';
      bar.dataset.role = 'op-loading-bar';
      const prog = document.createElement('div');
      prog.className = 'progress';
      bar.appendChild(prog);

      li.appendChild(spin);
      li.appendChild(bar);
    }
  } else {
    li.classList.remove('loading');
    li.querySelectorAll('[data-role="op-spinner"],[data-role="op-loading-bar"]').forEach(n => n.remove());
  }
}

function attachDropZone(ul) {
  if (!ul) return;

  ul.addEventListener('dragover', (ev) => {
    if (ev.dataTransfer.types.includes('application/json')) {
      ev.preventDefault();
      ev.dataTransfer.dropEffect = 'move';
      ul.classList.add('droptarget');
    }
  });

  ul.addEventListener('dragleave', () => ul.classList.remove('droptarget'));

  ul.addEventListener('drop', async (ev) => {
    ev.preventDefault();
    ul.classList.remove('droptarget');

    let data = {};
    try { data = JSON.parse(ev.dataTransfer.getData('application/json') || '{}'); } catch {}
    const op = (data.op || '').trim().toUpperCase();
    const novoStatus = statusFromUlId(ul.id);
    if (!op || !novoStatus) return;

    // üîî feedback visual no cart√£o enquanto processa
    setOpLoading(op, true);

    try {
      await moveOpAPI(op, novoStatus);

      // redesenha o mini-kanban (vai remover o <li> antigo)
      const alfa = (window.codigoSelecionado || '').trim();
      const cp   = (window.codigoSelecionadoCP || '').toString().trim() || null;
      if (alfa) await window.renderOpsBoard(alfa, cp);

      // atualiza pain√©is globais tamb√©m
      try { await window.Preparacao?.refreshPreparacaoUI?.(); } catch {}
    } catch (e) {
      // erro: tira o loading do cart√£o que ficou no lugar
      setOpLoading(op, false);
      alert(e.message || e);
    } finally {
      // se o <li> antigo ainda existir (ex.: erro), garanta que saiu do loading
      setOpLoading(op, false);
    }
  });
}


  // --- Resolvedor CP‚ÜíAlfa para filtrar corretamente por produto ---
  let renderToken = 0;
  async function buildCpToAlphaMap(buckets) {
    const all = [...(buckets.fila||[]), ...(buckets.em||[]), ...(buckets.conc||[])];
    const cps = [...new Set(all.map(c => String(c.produto_codigo ?? '').trim()).filter(s => /^\d+$/.test(s)))];
    if (!cps.length) return {};
    const qs = cps.map(cp => 'cp=' + encodeURIComponent(cp)).join('&');
    try {
      const r = await fetch('/api/produtos/codigos?' + qs);
      const j = await r.json();
      return j?.data || {};
    } catch { return {}; }
  }
  const alphaFromMap = (map, cp) => (map[cp]?.codigo || null);

  // =================== RENDER mini-kanban de OPs (para 1 produto) ===================
  async function renderOpsBoard(codigoAlfa, codigoNum) {
    const rid = ++renderToken;

    const ulFila = document.getElementById(IDS.fila);
    const ulEm   = document.getElementById(IDS.em);
    const ulConc = document.getElementById(IDS.conc);
    if (!ulFila || !ulEm || !ulConc) return;

    const resp = await fetch('/api/preparacao/listar', { cache: 'no-store' });
    const payload = await resp.json();
    const data   = payload?.data || {};
    const buckets = {
      fila: data['A Produzir'] || [],
      em:   data['Produzindo'] || [],
      conc: data['Produzido']  || []
    };

    const cpMap   = await buildCpToAlphaMap(buckets);
    const codAlfa = String(codigoAlfa || '').trim();
    const codNum  = codigoNum ? String(codigoNum).trim() : null;

    const matchProd = (c) => {
      const cp   = String(c.produto_codigo ?? '').trim();
      const alfa = alphaFromMap(cpMap, cp) || cp; // fallback: cp
      if (codNum  && cp   === codNum)  return true;
      if (codAlfa && alfa === codAlfa) return true;
      return false;
    };

    const dedupeByOp = (arr) => {
      const seen = new Set();
      return arr.filter(c => {
        const k = String(c.op || '').trim();
        if (!k || seen.has(k)) return false;
        seen.add(k);
        return true;
      });
    };

    let listaFila   = dedupeByOp(buckets.fila.filter(matchProd));
    let listaEmProd = dedupeByOp(buckets.em.filter(matchProd));
    let listaConc   = dedupeByOp(buckets.conc.filter(matchProd));

    // prioridade: Em produ√ß√£o > A Produzir
    const emOps = new Set(listaEmProd.map(x => x.op));
    listaFila = listaFila.filter(x => !emOps.has(x.op));

    if (rid !== renderToken) return;

    const fragFila = document.createDocumentFragment();
    const fragEm   = document.createDocumentFragment();
    const fragConc = document.createDocumentFragment();

    const pushOp = (frag, op) => {
      const li = document.createElement('li');
      li.className = 'kanban-card';
      li.textContent = op || '‚Äî';
      li.dataset.op = op;        // marca como item de OP
      attachOpDrag(li);          // ativa arraste
      frag.appendChild(li);
    };

    if (!listaFila.length)  { const li = document.createElement('li'); li.className='empty'; li.textContent='‚Äî'; fragFila.appendChild(li); }
    else { for (const c of listaFila)   pushOp(fragFila, c.op); }

    if (!listaEmProd.length){ const li = document.createElement('li'); li.className='empty'; li.textContent='‚Äî'; fragEm.appendChild(li); }
    else { for (const c of listaEmProd) pushOp(fragEm, c.op); }

    if (!listaConc.length)  { const li = document.createElement('li'); li.className='empty'; li.textContent='‚Äî'; fragConc.appendChild(li); }
    else { for (const c of listaConc)   pushOp(fragConc, c.op); }

    if (rid !== renderToken) return;
    ulFila.replaceChildren(fragFila);
    ulEm.replaceChildren(fragEm);
    ulConc.replaceChildren(fragConc);

    // Header ‚ÄúProduto ‚Äî ‚Ä¶ [Voltar]‚Äù logo acima do quadro
    showHeaderWithCode(codAlfa);

    // As 3 colunas passam a aceitar drop
    attachDropZone(ulFila);
    attachDropZone(ulEm);
    attachDropZone(ulConc);
  }

  // =================== Entrar/Sair do modo OPs ===================
  function enterOpsMode(codigoAlfa, codigoNum) {
    window.__mpOpsMode = true;
    window.codigoSelecionado   = codigoAlfa;
    window.codigoSelecionadoCP = codigoNum || '';
    ensureHeader();
    renderOpsBoard(codigoAlfa, codigoNum);
  }

  async function renderAggregateBoard() {
    // Deixa o renderer oficial desenhar o kanban por produtos, se existir:
    if (typeof window.carregarKanbanPreparacao === 'function') {
      await window.carregarKanbanPreparacao();
    } else if (typeof window.initPreparacaoKanban === 'function') {
      await window.initPreparacaoKanban(true);
    } else {
      // Fallback duro
      location.reload();
    }
    // Esconde header
    const hdr = document.getElementById('mp-ops-header');
    if (hdr) hdr.style.display = 'none';
  }

  async function exitOpsMode() {
    window.__mpOpsMode = false;
    await renderAggregateBoard(); // volta ao kanban por produtos nesta mesma guia
  }

  // =================== Clique no cart√£o de PRODUTO ‚Üí entra no modo OPs ===================
  function installClickDelegation() {
    const wrapper = getBoardWrapper();
    if (!wrapper) return;

    wrapper.addEventListener('click', (ev) => {
      const li = ev.target.closest('li.kanban-card');
      if (!li) return;
      // se j√° √© item de OP (tem data-op), n√£o reentra
      if (li.dataset && li.dataset.op) return;

      const alfa = (li.dataset?.codigo || '').trim();
      if (!alfa) return; // precisa do c√≥digo alfanum√©rico
      const cp   = (li.dataset?.cp || '').trim(); // se tiver, ajuda o matching
      enterOpsMode(alfa, cp || null);
    });

    // ESC para sair do modo OPs
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && window.__mpOpsMode) exitOpsMode();
    });
  }

  // Exporte as fun√ß√µes √∫teis se quiser cham√°-las de outros scripts
  window.renderOpsBoard = renderOpsBoard;
  window.enterOpsMode   = enterOpsMode;
  window.exitOpsMode    = exitOpsMode;
  window.showHeaderWithCode = showHeaderWithCode;

  // Boot: garante header e clique
  ensureHeader();
  installClickDelegation();
})();
</script>

<!-- Modal Criar/Editar Colaborador -->
<!-- Modal Criar/Editar Colaborador -->
<div id="colabModal" class="modal" style="display:none">
  <div class="modal-content colab">
    <div class="modal-header colab">
      <h3 id="colabModalTitle">Novo colaborador</h3>
      <button class="modal-close colab" id="colabModalClose" aria-label="Fechar">√ó</button>
    </div>

    <div class="modal-body colab">
      <form id="colabForm" autocomplete="off" class="colab-grid">
        <!-- Linha 1 -->
        <div class="form-row">
          <label class="form-field sm">
            <span class="label">ID</span>
            <input id="colab-id" type="text" readonly placeholder="(gerado ao salvar)">
          </label>

          <label class="form-field">
            <span class="label">Usu√°rio</span>
            <input id="colab-username" type="text" required placeholder="ex.: joao.silva">
          </label>
        </div>

        <!-- Linha 2 -->
        <div class="form-row">
          <div class="form-field">
            <span class="label">Perfis</span>
            <div class="chip-row" id="colab-roles">
              <label class="chip"><input type="checkbox" value="admin"> admin</label>
              <label class="chip"><input type="checkbox" value="editor"> editor</label>
            </div>
          </div>
          <div class="form-field"></div>
        </div>

        <!-- Linha 3 -->
        <div class="form-row">
          <label class="form-field">
            <span class="label">Fun√ß√£o</span>
            <div class="inline">
              <select id="colab-funcao" required></select>
              <button type="button" id="btn-add-funcao" class="btn-mini" title="Nova fun√ß√£o">+</button>
            </div>
          </label>

          <label class="form-field">
            <span class="label">Setor</span>
            <div class="inline">
              <select id="colab-setor" required></select>
              <button type="button" id="btn-add-setor" class="btn-mini" title="Novo setor">+</button>
            </div>
          </label>
        </div>

        <!-- Linha 4 -->
        <div class="form-row">
          <label class="form-field full">
            <span class="label">Opera√ß√£o (Omie)</span>
            <select id="colab-operacao">
              <option value="">Selecionar opera√ß√£o‚Ä¶</option>
            </select>
          </label>
        </div>

        <div class="form-row">
          <div class="form-field full">
            <span class="label">Opera√ß√µes selecionadas</span>
            <div id="colab-operacao-list" class="operacao-list">
              <div class="operacao-empty">Nenhuma opera√ß√£o adicionada.</div>
            </div>
          </div>
        </div>

        <!-- Permiss√µes (somente no modo edi√ß√£o) -->
        <div id="colab-permissoes" class="perm-wrapper" style="display:none">
          <h4>Permiss√µes</h4>
          <div id="permissoes-grid"></div>
        </div>
      </form>
    </div>

    <div class="modal-footer colab">
      <button id="colabSalvar" class="btn-primary">Salvar</button>
      <button id="colabCancelar" class="btn-secondary" type="button">Cancelar</button>
    </div>
  </div>
</div>

<style>
  /* ====== ESTILOS SOMENTE DO MODAL DE COLABORADOR ======
     Tudo fica sob #colabModal para n√£o afetar o restante da p√°gina. */
  #colabModal .modal-content { max-width: 720px; border-radius: 14px; padding: 0; }
  #colabModal .modal-header { display:flex; align-items:center; justify-content:space-between;
    padding:16px 18px; border-bottom:1px solid rgba(0,0,0,.08); }
  #colabModal .modal-header h3 { margin:0; font-size:1.15rem; font-weight:700; }
  #colabModal .modal-close { border:none; background:transparent; font-size:22px; line-height:1;
    width:36px; height:36px; border-radius:50%; cursor:pointer; }
  #colabModal .modal-close:hover { background:rgba(0,0,0,.06); }

  #colabModal .modal-body { padding:18px; }
  #colabModal .modal-footer { display:flex; gap:10px; justify-content:flex-end; padding:14px 18px 18px;
    border-top:1px solid rgba(0,0,0,.06); }

  #colabModal .colab-grid { display:flex; flex-direction:column; gap:14px; }
  #colabModal .form-row { display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
  #colabModal .form-field { display:flex; flex-direction:column; gap:6px; }
  #colabModal .form-field.sm { max-width:220px; }
  #colabModal .form-field.full { grid-column:1 / -1; }
  #colabModal .form-field .label { font-size:.85rem; font-weight:600; color:#333; }
  #colabModal .form-field input,
  #colabModal .form-field select {
    width:100%; height:38px; border-radius:10px; border:1px solid #d9d9d9;
    padding:0 12px; outline:none; background:#fff;
  }
  #colabModal .form-field input[readonly] { background:#f6f6f6; color:#666; }

  #colabModal .inline { display:flex; align-items:center; gap:8px; }
  #colabModal .chip-row { display:flex; align-items:center; gap:14px; }
  #colabModal .chip { display:flex; align-items:center; gap:6px; font-size:.95rem; }

  #colabModal .btn-mini {
    height:34px; min-width:34px; padding:0 10px; border-radius:999px; border:none; cursor:pointer;
    background:#2f66ff; color:#fff; font-weight:600;
  }
  #colabModal .btn-mini:hover { filter:brightness(.95); }

  #colabModal .btn-primary,
  #colabModal .btn-secondary {
    height:40px; padding:0 18px; border-radius:999px; border:none; cursor:pointer; font-weight:700;
  }
  #colabModal .btn-primary { background:#2f66ff; color:#fff; }
  #colabModal .btn-primary[disabled] { opacity:.7; cursor:not-allowed; }
  #colabModal .btn-secondary { background:#eef2ff; color:#2f3a66; }

  #colabModal .perm-wrapper { margin-top:10px; padding-top:10px; border-top:1px dashed rgba(0,0,0,.1); }

  #colabModal .operacao-list { display:flex; flex-wrap:wrap; gap:6px; padding:6px; border-radius:10px; border:1px dashed rgba(0,0,0,.12); background:rgba(0,0,0,.02); min-height:40px; align-items:center; }
  #colabModal .operacao-chip { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; background:#eef2ff; color:#1f2a4d; font-weight:600; font-size:0.85rem; }
  #colabModal .operacao-chip button { border:none; background:transparent; color:inherit; cursor:pointer; font-size:14px; line-height:1; width:18px; height:18px; border-radius:50%; display:flex; align-items:center; justify-content:center; }
  #colabModal .operacao-chip button:hover { background:rgba(0,0,0,.08); }
  #colabModal .operacao-empty { color:#777; font-style:italic; }

  /* Responsivo: 1 coluna no mobile */
  @media (max-width: 640px) {
    #colabModal .form-row { grid-template-columns: 1fr; }
    #colabModal .form-field.sm { max-width:none; }
  }

  /* A√ß√µes da tabela de colaboradores ‚Äî escopado */
#dadosColaboradores .td-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

#dadosColaboradores .btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: #cfd6ff;         /* tom claro para modo escuro */
  cursor: pointer;
}
#dadosColaboradores .btn-icon:hover {
  background: rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.22);
}

</style>


</body>
</html>
